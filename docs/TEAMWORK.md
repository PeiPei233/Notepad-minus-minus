# 团队合作

## 开发计划

在程序开发初期，我们小组初步确定目标为开发打造一款能够实现文本编辑器基础功能的程序，因此在界面设计以及功能选择上都会对文本编辑器有一个模拟的倾向。在完成了基础功能以后，小组成员也希望能够对程序进行优化。因此在后期也对程序读取和暂时存储文本内容的方式进行了优化修改，由原先的一维数组记录改成了按照行列用二维数组动态储存内容。此外，由于时间有限，Notepad-- 对于文本编辑器的功能实现并没有那么完全，在后期的完善当中，小组成员也在对其功能进行不断地添加和完备，希望能够尽可能多的实现文本编辑器的各项功能。

除了目前以及完成的计划，对于产品未来的开发运营，在进行分享讨论之后，小组成员希望能够更多地收集用户的意见看法，对现有程序进行完善，争取打造更加适合市场的 Notepad-- 项目。

如果未来有时间，我们也会进一步提升 Notepad-- 的使用体验，例如将储存结构由目前的类二维数组改为红黑树优化的 Piece Tree 结构（参考 VSCode）。

## 编码规范

统一使用GB2312编码，因为libgraphics只支持GB2312编码。

在代码规范上，要求小组成员代码简洁明晰，关键步骤带有注释，变量及函数名尽量使用驼峰法命名。

## 任务分工

- @PeiPei233
    1.	进行每阶段的时间规划和任务分工
    2.	进行程序初期大框架的设置和模块划分
    3.	主要负责`display.c` `storage.c` `callback.c`文件的编写
    4.	负责整合各个模块
    5.	录制ppt讲解部分的视频，并负责撰写部分大程报告

- @zju-edu-zj
    1.	主要负责`file.c` `find.c`文件编写
    2.	同时负责对`edit.c`文件的修改
    3.	协助整合各个模块
    4.	负责大程报告中部分内容

- @Bei7533
    1.	负责`edit.c` `global.c` `record.c`文件的编写
    2.	主要负责find.c文件的修改
    3.	负责大程报告中部分内容
    4.	录制演示部分的视频

## 个人遇到的难点与解决方案

- @PeiPei233
    1. 对`libgraphics`及`simpleGUI`进行修改。
        - 由于`libgraphics`过于过时，问题颇多，因此在程序编写当中耗费了许多精力对`libgraphics`进行修改。在此过程中需要借助 Microsoft 官方文档明白`graphics.c`文件画图时所调用的各个函数意义以及画图的工作流程，并在此基础上对其进行一定量的修改。除此之外，由于`libgraphics`的各种`char *`与`wchar_t *`的混用等问题，导致其在新版 Visual Studio 中，报错过多。最终，修复的`libgraphics`的bug包括但不仅限于：
           1. 创建窗口时未加参数限制窗口大小缩放，却并没有适配窗口缩放。
           1. 创建窗口时未加参数导致 Windows 不会给出鼠标双击的回调信息，但 libgraphics 却对其进行判断。
        - 关于 `simpleGUI`，为了我们自己的回调函数能与其更好地配合，我们也进行了一定量的修改。
    2. 关于非等宽字体的适配问题。
       - 由于使用 `libgraphics` 绘图时，不同的系统对非等宽字体的显示有不同的效果。例如在本人的电脑上若同一行内同时有中英文，则英文字体的字间距会被压缩。但这在小组其他成员的电脑上并不会出现这样的问题。最终采用一个一个字符 `DrawTextString()` 的方式规避该问题的系统差。


- @zju-edu-zj
  1. 对动态内存的分配和使用
     - 尽管我们做的只是“Notepad--”，但我们始终关注对大容量文本的可操作性，不满足于简单的Notepad的内存分配机制。为此，普通的数组类型肯定无法使用，方便起见，我采用`strlib`库函数进行字符串的传递，然而显然这个库存在这巨大的缺陷：它不停地新建内存却不将其除去。不得已对库函数进行了一定修改以满足我方需求。在第二阶段，我们组改用二维数组进行字符串显示，借鉴C++的vector实现方式，讨论并手写了相对复杂的数据结构，也较为完备地实现了内存动态分配机制，抛弃了`strlib`库。

  2. 调用 WindowsAPI 实现文件对话选择框等
     - c语言是一个跨平台的语言，不同于汇编只能调用自身中断，在 Windows 平台下我们能运用更多操作系统为我们提供的函数，方便快捷地实现更多功能，常见的文件选择对话框就是一例。然而阅读本身技术文档费时费力，网上在这方面的答案良莠不齐，与编译器版本等不适应问题极为突出。经历几番调试终于实现成功，在各个参数的选择上却也需小心翼翼。


- @Bei7533
  1. 实现代码与 Windows 系统的交互 
     - 由于这是全新的从未学习过的知识，编写过程当中需要编写者自己去网络上查找实现代码与 Windows 系统的交互相关资料和范例进行学习和应用，因此该部分的编写需要在前期学习和模拟当中花费较多的精力。我通过成员分享的资料网站以及相关视频的教学，尝试自己一步步进行编写与不断修改。从读取剪切板内容开始，再尝试进行内容的写入，最终实现读写的完备功能。

  2. vscode 和 GitHub 软件的使用
     - 为了方便小组合作，我们小组采用了 vscode 和 GitHub 软件来进行大程序的编写。由于缺乏对两者的使用经验，我需要先对这两款软件的使用进行学习，其中由于使用不惯也出现了一些小问题，譬如 vscode 的调试问题以及 GitHub 的更新覆盖问题，但最后都在成员的帮助以及自己的尝试下，对它们的使用更加熟练，最终也解决了这些问题。

## 合作总结
2022年4月20日：进行第一次集中线下讨论，主要内容包括确定选题以及讨论大致问题解决方向。在本次讨论当中，小组成员们针对六个选题逐一做了详尽细致的分析，并对其可能需要运用的知识点和重要难点进行了归纳，最终小组成员一致同意选择文本编辑器制作这一项大程序的制作。并进行了GitHub、vscode等需要运用到的平台的安装搭建。

2021年4月23日：由 @PeiPei233 完成程序主要框架的搭建之后，进行了各个成员的任务分配，以及注意事项的交代。由 @PeiPei233 负责`init`文件以及`display`文件的编写；@zju-edu-zj 负责`file`文件，`callback`文件的编写；@Bei7533 负责`global`文件和`edit`的编写。并且确定了任务的截止时间。

2021年5月2日：在完成了第一阶段的任务之后，每个成员对自己负责部分进行说明阐释，包括程序的实现过程、自己的解决思路以及遇到的难点等。并将所有成员的代码汇总整合，对其中问题进行分析。最后分配了下一阶段各个成员的任务。由 @PeiPei233 负责所有文件的整合调试以及 bug 修改，@zju-edu-zj 负责`file`等文件的完善修改，@Bei7533 负责`find`文件的编写修改以及报告撰写。

2021年5月18日：完成了文本编辑器大致功能的搭建，并且进一步讨论希望能够修改文件内容的储存方式，将一维数组的储存方式改为二维数组动态储存，并且加上撤销和重做的功能。小组会对二维数组动态储存的实现方式进行了具体的讨论，并且由 @PeiPei233 进行存储文件的撰写，@zju-edu-zj 完成原本代码对于储存方式的修改部分。对撤销和重做功能的实现通过讨论之后决定采用双向链表的形式进行，并且确定由@Bei7533 进行编写。

## 收获感言

在这一次的合作中，我们团队的成员们互帮互助，共同完成了大程 Notepad-- 的编写。我们团队成员都体会到了团队协作的重要性以及高效性，编写及调试代码的能力得到了提高，也都通过这一合作学会了对git的基本使用。除此之外，我们也从团队合作中学到了一些教训，在团队合作中要消除团队成员间的认知差异，防止成员间写出的代码出现匹配不上需求的情况。对此，合作时应当积极提问，讨论时也要注意细枝末节，减少因为信息差而导致的空耗。

### @PeiPei233

在本次项目中，我们完成了文本编辑器这一看似简单的程序的制作。在这一过程中，我深刻体会到了开发人员的不易。作为组长，我也有做的不到位的地方。例如第一次发布程序框架时有许多考虑不周到的地方，这导致在初期阶段浪费了一定的时间，好在后续与组员交流的过程中逐渐走向正轨。我也从这次中吸取教训，在后续讨论时先将所有组员间的信息差统一后再开始编写程序。当然，我也意识到了选个好轮子的重要性。

这次项目也让我对 Windows GDI 有了更多的了解，也让我对 GitHub 的运用更加熟练。可惜的是由于时间原因还有一些小功能未能完成，不过搭好框架后想增加新功能也并非难事。如果未来有时间，相信我们可以把 Notepad-- 打造地更加完善。

### @zju-edu-zj

在本次项目完成过程中，我们较为完整地实现了一个软件的编写，几乎实现了Notepad的所有功能，并在某些方面有所改进，这种经历应该是比较独特的，也在此过程中感受到了程序员们被测试找茬的痛苦。之前一个题目几十行尚且不能一次通过，现在一个文件几百行，保持不出错极为困难，不得不不断调试与修改。我逐渐认识到可拓展性的重要性，确定函数的功能与写函数一样，都是软件开发中不可或缺的一环。

当然遗憾的是，限于知识水平，我们并未能开发出一款完整的软件，但也已经较为接近，日常生活实践与学到的知识间终于交叉，让我拥有了做项目、写软件的自信。无论如何，我相信我们写出的“Notepad--”不会输给他人，也为我接下来的学习实践积累了经验。

### @Bei7533
在项目的完成过程当中，我首先感觉到了团体合作的重要作用。由于个人能力的局限性，开始时我的编写进程十分困难，但是通过与组员的讨论沟通，我不断地学习理解，掌握新知识，这对我后期代码的编写以及个人能力的提升有很大的帮助。与此同时，小组合作也督促我更加努力地提高自己。为了在小组当中起到良好的作用，面对能力极强的队友，我不得不不断地提高对自己的要求，尝试突破自己的舒适茧房，进行自我磨练与学习。这在我的个人作业当中是不会有如此的效果的。

此外，在具体的知识掌握方面，我通过 `edit` 文件的编写，学会了如何与 Windows 系统的剪贴板进行交互，读取修改其中的内容。通过对撤销重做功能的编写更好地掌握了双向链表的使用。此外，对于 GitHub 以及 vscode 的使用也有了更加深刻的理解。这对我未来的学习有很长远的帮助。

